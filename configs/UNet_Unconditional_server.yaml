# config.yaml
# ğŸŸ¢ é€‚ç”¨äº "åˆ†å¸ƒåˆ°åˆ†å¸ƒ" (Past -> Future) æ¨¡å‹çš„ç‰ˆæœ¬

data:
  data_path: "/opt/data/private/Himawari/train/xiaoshan_6steps_30min_Data_day.h5"
  json_path: "/opt/data/private/Himawari/train/xiaoshan_6steps_30min_Data_day_all.json"
  dataset_prefix: "2022"
  train_ratio: 0.9
  random_flip: 0.5
  num_workers: 8

model:
  # å¯¹åº” UNet çš„å‚æ•°
  input_size: [6, 256, 256]  # (T, H, W)
  # ğŸ”´ 'in_channels_c: 16' å·²è¢«ç§»é™¤ã€‚
  out_channels_c: 8           # ğŸŸ¢ UNet çš„ 'data_channels_c' å°†ä½¿ç”¨æ­¤å€¼
  time_emb_dim: 256         # UNet ä¸­ t å’Œ r åµŒå…¥çš„ç»´åº¦

meanflow:
  # å¯¹åº” MeanFlow çš„å‚æ•°
  flow_ratio: 0.75
  time_dist: ['lognorm', -0.4, 1.0]
  # ğŸ”´ æ‰€æœ‰ CFG å‚æ•°å·²è¢«ç§»é™¤ (cfg_ratio, cfg_scale, cfg_uncond)
  # ç¡®ä¿ä½ çš„ train_UNet.py ä¸­çš„ MeanFlow åˆå§‹åŒ–ä¹Ÿç§»é™¤äº† jvp_apiï¼ˆå¦‚æœå®ƒä¸åœ¨configä¸­ï¼‰
  # å¦åˆ™ï¼Œè¯·åœ¨è¿™é‡Œæ·»åŠ  jvp_api: 'autograd'

optimizer:
  lr: 1.0e-3
  weight_decay: 0.0

scheduler:
  num_warmup_steps: 5000

training:
  n_steps: 1000000
  gradient_clip_val: 1.0
  # batch_size å°†ä»å‘½ä»¤è¡Œä¼ å…¥

logging:
  project_name: "MeanFlow_Himwari8"
  log_every_n_steps: 100       # ç»ˆç«¯å’Œ Wandb çš„ Loss æ‰“å°é¢‘ç‡
  save_step_frequency: 5000    # Checkpoint å’Œ å¯è§†åŒ–é‡‡æ · é¢‘ç‡